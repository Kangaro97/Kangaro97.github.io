(function(e){function t(t){for(var a,n,o=t[0],u=t[1],l=t[2],c=0,m=[];c<o.length;c++)n=o[c],r[n]&&m.push(r[n][0]),r[n]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);d&&d(t);while(m.length)m.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,o=1;o<s.length;o++){var u=s[o];0!==r[u]&&(a=!1)}a&&(i.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},r={app:0},i=[];function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=u;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var a=s("64a9"),r=s.n(a);r.a},"2f21":function(e,t,s){},"3af9":function(e,t,s){"use strict";var a=s("c2ad"),r=s.n(a);r.a},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("097d");var a=s("2b0e"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("app-header"),s("router-view")],1)},i=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"header"},[s("div",{staticClass:"header__title"},[s("router-link",{staticClass:"logo",attrs:{to:"/"}}),s("div",{staticClass:"title"},[e._v("Тестовое задание")])],1),s("div",{staticClass:"header__menu"},[e.auth?s("nav",{staticClass:"navigation"},[s("router-link",{staticClass:"navigation__link",attrs:{to:"profile"}},[e._v("Профиль")]),s("div",{staticClass:"vertical-line"}),s("a",{staticClass:"navigation__link",on:{click:e.logout}},[e._v("Выйти")])],1):s("nav",{staticClass:"navigation"},[s("router-link",{staticClass:"navigation__link",attrs:{to:"signin"}},[e._v("Войти")]),s("div",{staticClass:"vertical-line"}),s("router-link",{staticClass:"navigation__link",attrs:{to:"signup"}},[e._v("Зарегистрироваться")])],1)])])},o=[],u={computed:{auth:function(){return this.$store.getters.authState}},methods:{logout:function(){this.$store.dispatch("logout")}}},l=u,d=(s("8d76"),s("2877")),c=Object(d["a"])(l,n,o,!1,null,"15ffb763",null);c.options.__file="Header.vue";var m=c.exports,v={components:{AppHeader:m}},p=v,g=(s("034f"),Object(d["a"])(p,r,i,!1,null,null,null));g.options.__file="App.vue";var f=g.exports,$=s("1dce"),_=s.n($),h=s("8c4f"),b=(s("7f7f"),s("2f62")),w=s("bc3a"),C=s.n(w),y="AIzaSyCUCpMSBScHEGWYbZhT4HKXuD4F--jCtB4",q=C.a.create({baseURL:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/"}),x=C.a.create({baseURL:"https://sign-up-form-e11ce.firebaseio.com/"});s("3e8f");a["a"].use(b["a"]);var S=new b["a"].Store({state:{isAuthenticated:!1,user:{id:null,email:null,name:null,surname:null,age:null,gender:null,accessToken:null}},getters:{getUserData:function(e){return console.log("GetUserData",e.user),{email:e.user.email,name:e.user.name,surname:e.user.surname,age:e.user.age,gender:e.user.gender}},authState:function(e){return null!==e.user.id}},mutations:{setUser:function(e,t){e.user=t,console.log("Set user",e.user)},clearUser:function(e){e.user={id:null,email:null,name:null,surname:null,age:null,gender:null,accessToken:null}}},actions:{logout:function(e){var t=e.commit;t("clearUser"),console.log("LOGOUT")},setLogoutTimer:function(e,t){var s=e.dispatch;setTimeout(function(){s("logout")},1e3*t),console.log("SET_TOKEN_LOGOUT_TIMER")},signUp:function(e,t){var s=e.commit,a=e.dispatch;return new Promise(function(e,r){q.post("signupNewUser?key="+y,{email:t.email,password:t.password,returnSecureToken:!0}).then(function(r){console.log(r);var i={id:r.data.localId,email:t.email,name:t.name,surname:t.surname,age:t.age,gender:t.gender};x.patch("users/"+i.id+".json?auth="+r.data.idToken,i).then(function(e){console.log("Success. Adding new user id in database:",e)}).catch(function(e){console.log("Error. Adding new user id in database:",e)}),console.log("New User:",i),i.accessToken=r.data.idToken,a("setLogoutTimer",r.data.expiresIn),s("setUser",i),e()}).catch(function(e){console.log(e),r()})})},signIn:function(e,t){var s=e.commit,a=e.dispatch,r=t.email,i=t.password;return new Promise(function(e,t){q.post("verifyPassword?key="+y,{email:r,password:i,returnSecureToken:!0}).then(function(r){console.log(r);var i={id:r.data.localId,email:r.data.email,accessToken:r.data.idToken};x.get("users/"+i.id+".json?auth="+i.accessToken).then(function(t){console.log(t),i.name=t.data.name,i.surname=t.data.surname,i.age=t.data.age,i.gender=t.data.gender,s("setUser",i),console.log("User:",i),a("setLogoutTimer",r.data.expiresIn),e()}).catch(function(e){console.log(e),t()})}).catch(function(e){console.log(e),t()})})}}}),P=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},T=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{staticClass:"main-content"},[s("h3",[e._v("Главная страница")])])}],k=(s("6fb7"),{}),U=Object(d["a"])(k,P,T,!1,null,"19b99c22",null);U.options.__file="Home.vue";var O=U.exports,j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{staticClass:"main-content"},[s("div",{staticClass:"form"},[s("h3",{staticClass:"main-title"},[e._v("Регистрация")]),s("div",{staticClass:"dividing-line"}),s("div",{staticClass:"info-note"},[e._v("Обязательные поля")]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"title",attrs:{for:"email-input"}},[e._v("Электронная почта")]),s("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:e.$v.user.email.$model,expression:"$v.user.email.$model",modifiers:{trim:!0,lazy:!0}},{name:"focus",rawName:"v-focus"}],staticClass:"text-input",class:{invalid:!e.$v.user.email.email||!e.$v.user.email.required&&e.$v.user.email.$dirty},attrs:{id:"email-input",type:"text",placeholder:"email@email.com"},domProps:{value:e.$v.user.email.$model},on:{change:function(t){e.$set(e.$v.user.email,"$model",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e.$v.user.email.email?e._e():s("div",{staticClass:"message error-message"},[e._v("Почта введена неправильно. Пожалуйста, повторите ввод.")]),!e.$v.user.email.required&&e.$v.user.email.$dirty?s("div",{staticClass:"message error-message"},[e._v("Обязательное поле.")]):e._e()]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"title",attrs:{for:"pasword-input"}},[e._v("Пароль")]),s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.$v.user.password.$model,expression:"$v.user.password.$model",modifiers:{lazy:!0}}],staticClass:"text-input",class:{invalid:!e.$v.user.password.minLength&&e.user.password.length>0||!e.$v.user.password.required&&e.$v.user.password.$dirty},attrs:{id:"password-input",type:"password",placeholder:"Введите пароль"},domProps:{value:e.$v.user.password.$model},on:{change:function(t){e.$set(e.$v.user.password,"$model",t.target.value)}}}),s("div",{staticClass:"message info-message",class:{"error-message":!e.$v.user.password.minLength&&e.user.password.length>0}},[e._v("Пароль должен содержать не менее 6 символов.")]),!e.$v.user.password.required&&e.$v.user.password.$dirty?s("div",{staticClass:"message error-message"},[e._v("Обязательное поле.")]):e._e()]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"title",attrs:{for:"dynamic-label-input"}},[e._v("Повторите пароль")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.repeatPassword.$model,expression:"$v.repeatPassword.$model"}],staticClass:"text-input",class:{invalid:!e.$v.repeatPassword.sameAsPassword&&e.$v.repeatPassword.$dirty},attrs:{id:"dynamic-label-input",type:"password",placeholder:"Повторите пароль"},domProps:{value:e.$v.repeatPassword.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.repeatPassword,"$model",t.target.value)}}}),!e.$v.repeatPassword.sameAsPassword&&e.$v.repeatPassword.$dirty?s("div",{staticClass:"message error-message"},[e._v("Пароль не совпадает. Пожалуйста, повторите ввод.")]):e._e()]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"title",attrs:{for:"name-input"}},[e._v("Имя")]),s("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:e.$v.user.name.$model,expression:"$v.user.name.$model",modifiers:{trim:!0,lazy:!0}}],staticClass:"text-input",class:{invalid:!e.$v.user.name.required&&e.$v.user.name.$dirty},attrs:{id:"name-input",type:"text",placeholder:"Иван"},domProps:{value:e.$v.user.name.$model},on:{change:function(t){e.$set(e.$v.user.name,"$model",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),!e.$v.user.name.required&&e.$v.user.name.$dirty?s("div",{staticClass:"message error-message"},[e._v("Обязательное поле.")]):e._e()]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"title",attrs:{for:"surname-input"}},[e._v("Фамилия")]),s("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:e.$v.user.surname.$model,expression:"$v.user.surname.$model",modifiers:{trim:!0,lazy:!0}}],staticClass:"text-input",class:{invalid:!e.$v.user.surname.required&&e.$v.user.surname.$dirty},attrs:{id:"surname-input",type:"text",placeholder:"Иванов"},domProps:{value:e.$v.user.surname.$model},on:{change:function(t){e.$set(e.$v.user.surname,"$model",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),!e.$v.user.surname.required&&e.$v.user.surname.$dirty?s("div",{staticClass:"message error-message"},[e._v("Обязательное поле.")]):e._e()]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"title",attrs:{for:"age-input"}},[e._v("Возраст")]),s("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:e.$v.user.age.$model,expression:"$v.user.age.$model",modifiers:{number:!0,lazy:!0}}],staticClass:"text-input",class:{invalid:!e.$v.user.age.required&&e.$v.user.age.$dirty||!e.$v.user.age.minValue&&e.$v.user.age.$dirty||!e.$v.user.age.required&&e.$v.user.age.$dirty},attrs:{id:"age-input",type:"number",placeholder:"18",min:"1",max:"122"},domProps:{value:e.$v.user.age.$model},on:{change:function(t){e.$set(e.$v.user.age,"$model",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),!e.$v.user.age.required&&e.$v.user.age.$dirty?s("div",{staticClass:"message error-message"},[e._v("Обязательное поле.")]):e._e(),!e.$v.user.age.minValue&&e.$v.user.age.$dirty?s("div",{staticClass:"message error-message"},[e._v("Вы ввели слишком маленькое значение.")]):e._e(),!e.$v.user.age.required&&e.$v.user.age.$dirty?s("div",{staticClass:"message error-message"},[e._v("Вы ввели слмшком большое значение.")]):e._e()]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"title"},[e._v("Пол")]),s("div",{staticClass:"radio-conteiner"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.user.gender.$model,expression:"$v.user.gender.$model"}],attrs:{id:"male-radio",name:"gender",type:"radio",value:"Мужской"},domProps:{checked:e._q(e.$v.user.gender.$model,"Мужской")},on:{change:function(t){e.$set(e.$v.user.gender,"$model","Мужской")}}}),s("label",{staticClass:"radio-label",attrs:{for:"male-radio"}},[e._v("Мужской")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.user.gender.$model,expression:"$v.user.gender.$model"}],attrs:{id:"female-radio",name:"gender",type:"radio",value:"Женский"},domProps:{checked:e._q(e.$v.user.gender.$model,"Женский")},on:{change:function(t){e.$set(e.$v.user.gender,"$model","Женский")}}}),s("label",{staticClass:"radio-label",attrs:{for:"female-radio"}},[e._v("Женский")])]),!e.$v.user.gender.required&&e.$v.user.gender.$dirty?s("div",{staticClass:"message error-message"},[e._v("Обязательное поле")]):e._e()]),s("button",{staticClass:"submit-button",class:{submitted:e.requestState.submitted,error:e.requestState.error},attrs:{disabled:e.$v.$invalid||e.requestState.inProgress||e.requestState.submitted||e.requestState.error},on:{click:function(t){t.preventDefault(),e.submit()}}},[s("span",[e._v(e._s(e.buttonText))])])])])},L=[],N={inserted:function(e){e.focus()}},E=s("b5ae"),A={name:"signUp",mixins:[$["validationMixin"]],directives:{focus:N},data:function(){return{user:{email:"",password:"",name:"",surname:"",age:null,gender:""},repeatPassword:"",requestState:{inProgress:!1,submitted:!1,error:!1}}},computed:{buttonText:function(){return this.requestState.inProgress?"Отправка...":this.requestState.submitted?"Готово":this.requestState.error?"Произошла ошибка":"Зарегистрироваться"}},validations:{repeatPassword:{sameAsPassword:Object(E["sameAs"])(function(){return this.user.password})},user:{email:{email:E["email"],required:E["required"]},password:{required:E["required"],minLength:Object(E["minLength"])(6)},name:{required:E["required"]},surname:{required:E["required"]},age:{required:E["required"],minValue:Object(E["minValue"])(1),maxValue:Object(E["maxValue"])(122)},gender:{required:E["required"]}}},methods:{submit:function(){var e=this;this.requestState.inProgress=!0,this.$store.dispatch("signUp",this.user).then(function(){e.requestState.inProgress=!1,e.requestState.submitted=!0,e.user={email:"",password:"",name:"",surname:"",age:null,gender:""},e.repeatPassword="",e.$v.$reset(),e.$router.push({path:"/profile"}),setTimeout(function(){e.requestState.submitted=!1},3e3)}).catch(function(){e.requestState.inProgress=!1,e.requestState.error=!0,setTimeout(function(){e.requestState.error=!1},3e3)})}}},z=A,I=(s("fdc7"),Object(d["a"])(z,j,L,!1,null,"3634b758",null));I.options.__file="SignUp.vue";var M=I.exports,D=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{staticClass:"main-content"},[s("div",{staticClass:"form"},[s("h3",{staticClass:"main-title"},[e._v("Вход")]),s("div",{staticClass:"dividing-line"}),s("div",{staticClass:"form-group form-group__login"},[s("label",{staticClass:"title",attrs:{for:"email-input"}},[e._v("Электронная почта")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.$v.email.$model,expression:"$v.email.$model",modifiers:{trim:!0}},{name:"focus",rawName:"v-focus"}],staticClass:"text-input",class:{invalid:!e.$v.email.email||!e.$v.email.required&&e.$v.email.$dirty},attrs:{id:"email-input",type:"text",placeholder:"email@email.com"},domProps:{value:e.$v.email.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.email,"$model",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e.$v.email.email?e._e():s("div",{staticClass:"message error-message"},[e._v("Почта введена неправильно.")]),!e.$v.email.required&&e.$v.email.$dirty?s("div",{staticClass:"message error-message"},[e._v("Обязательное поле.")]):e._e()]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"title",attrs:{for:"pasword-input"}},[e._v("Пароль")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.$v.password.$model,expression:"$v.password.$model",modifiers:{trim:!0}}],staticClass:"text-input",class:{invalid:!e.$v.password.minLength&&e.password.length>0||!e.$v.password.required&&e.$v.password.$dirty},attrs:{id:"password-input",type:"password",placeholder:"Введите пароль"},domProps:{value:e.$v.password.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.password,"$model",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),!e.$v.password.minLength&&e.password.length>0?s("div",{staticClass:"message error-message"},[e._v("Пароль должен содержать не менее 6 символов.")]):e._e(),!e.$v.password.required&&e.$v.password.$dirty?s("div",{staticClass:"message error-message"},[e._v("Обязательное поле.")]):e._e()]),s("button",{staticClass:"submit-button",class:{submitted:e.requestState.submitted,error:e.requestState.error},attrs:{disabled:e.$v.$invalid||e.requestState.inProgress||e.requestState.submitted||e.requestState.error},on:{click:function(t){return t.preventDefault(),e.login(t)}}},[s("span",[e._v(e._s(e.buttonText))])])])])},V=[],H={name:"signIp",mixins:[$["validationMixin"]],directives:{focus:N},data:function(){return{email:"",password:"",requestState:{inProgress:!1,submitted:!1,error:!1}}},computed:{buttonText:function(){return this.requestState.inProgress?"Отправка...":this.requestState.submitted?"Готово":this.requestState.error?"Произошла ошибка":"Войти"}},validations:{email:{email:E["email"],required:E["required"]},password:{required:E["required"],minLength:Object(E["minLength"])(6)}},methods:{login:function(){var e=this;this.requestState.inProgress=!0,this.$store.dispatch("signIn",{email:this.email,password:this.password}).then(function(){e.requestState.inProgress=!1,e.requestState.error=!0,e.$router.push("/profile")}).catch(function(){e.email="",e.password="",e.$v.$reset(),setTimeout(function(){e.requestState.error=!1},1e3)})}}},G=H,R=(s("aa0a"),Object(d["a"])(G,D,V,!1,null,"5f60abe0",null));R.options.__file="SignIn.vue";var B=R.exports,J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{staticClass:"main-content"},[s("div",{staticClass:"profile-container"},[s("h3",{staticClass:"main-title"},[e._v("Профиль")]),s("div",{staticClass:"dividing-line"}),s("div",{staticClass:"form-group form-group__name"},[s("div",{staticClass:"title"},[e._v("Фамилия Имя")]),s("div",{staticClass:"text"},[e._v(e._s(e.user.surname+" ")+" "+e._s(e.user.name))])]),s("div",{staticClass:"form-group form-group__minor-info"},[s("div",{staticClass:"title"},[e._v("Возраст")]),s("div",{staticClass:"text"},[e._v(e._s(e.user.age))]),s("div",{staticClass:"title title__age"},[e._v("Пол")]),s("div",{staticClass:"text"},[e._v(e._s(e.user.gender))])]),s("div",{staticClass:"form-group form-group__email"},[s("div",{staticClass:"title"},[e._v(" Электронная почта")]),s("div",{staticClass:"text"},[e._v(e._s(e.user.email))])])])])},K=[],F={name:"portfolio",computed:{user:function(){return this.$store.getters.getUserData},isAuthenticated:function(){return this.$store.getters.authState}},watch:{isAuthenticated:function(e){e||this.$router.push("/signin")}}},W=F,X=(s("3af9"),Object(d["a"])(W,J,K,!1,null,"71676994",null));X.options.__file="Profile.vue";var Y=X.exports;a["a"].use(h["a"]);var Z=new h["a"]({mode:"history",base:"/",routes:[{path:"/",component:O},{path:"/signup",component:M},{path:"/signin",component:B},{path:"/profile",component:Y,beforeEnter:function(e,t,s){S.getters.authState?s():s("signin")}}]});a["a"].config.productionTip=!1,a["a"].use(_.a),new a["a"]({router:Z,store:S,render:function(e){return e(f)}}).$mount("#app")},"5f24":function(e,t,s){},"64a9":function(e,t,s){},"6fb7":function(e,t,s){"use strict";var a=s("f88a"),r=s.n(a);r.a},"8d76":function(e,t,s){"use strict";var a=s("2f21"),r=s.n(a);r.a},aa0a:function(e,t,s){"use strict";var a=s("ded8"),r=s.n(a);r.a},c2ad:function(e,t,s){},ded8:function(e,t,s){},f88a:function(e,t,s){},fdc7:function(e,t,s){"use strict";var a=s("5f24"),r=s.n(a);r.a}});
//# sourceMappingURL=app.a0296884.js.map